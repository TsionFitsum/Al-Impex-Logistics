<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule A</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        function enableNextField(currentFieldId, nextFieldId) {
            var currentField = document.getElementById(currentFieldId);
            if (currentField.value !== '' || currentField.files.length > 0) {
                document.getElementById(nextFieldId).disabled = false;
            } else {
                document.getElementById(nextFieldId).disabled = true;
            }
        }

        function navigateToTemplate(event) {
            // Prevent the default form submission and handle it manually
            event.preventDefault();

            // Create a FormData object from the form element
            var form = document.querySelector('form');
            var formData = new FormData(form);

            // Submit the form data via AJAX
            fetch('/', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    // Redirect to the weightCertificate.html page after successful submission
                    window.location.href = '/weightCertificate';
                } else {
                    return response.text().then(text => { throw new Error(text); });
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <div class="w-full max-w-2xl bg-white p-8 rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold text-center mb-6">Schedule A - Tasks Pre Shipment</h2>
        <form method="POST" enctype="multipart/form-data" class="space-y-6">
            <!-- Your existing form content remains unchanged -->

            <div>
                <!-- Content of step 1 to step 10 remains unchanged -->
                <h3 class="font-semibold mb-2 text-center">7. Loading Report From Warehouse (Way Bill To Port)</h3>
                <label class="block mb-2">Date Issued (GC):</label>
                <input type="date" id="date7" name="date7" class="w-full p-2 border rounded" disabled oninput="enableNextField('date7', 'docNo7')">
                <label class="block mt-4 mb-2">Document No:</label>
                <input type="text" id="docNo7" name="docNo7" class="w-full p-2 border rounded" disabled oninput="enableNextField('docNo7', 'file7')">
                <label class="block mt-4 mb-2">Upload File:</label>
                <input type="file" id="file7" name="file7" class="w-full p-2 border rounded" disabled onchange="enableNextField('file7', 'date8')">
                <br/><br/>
                <button 
                    id="addTemplateBtn"
                    class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded shadow-md transition duration-300"
                    onclick="navigateToTemplate(event);">
                    Add Template
                </button>
            </div>


            <div>
                <h3 class="font-semibold mb-2 text-center">8. Weighbridge Report at Loading</h3>
                <label class="block mb-2">Date Issued (GC):</label>
                <input type="date" id="date8" name="date8" class="w-full p-2 border rounded" disabled oninput="enableNextField('date8', 'docNo8')">
                <label class="block mt-4 mb-2">Document No:</label>
                <input type="text" id="docNo8" name="docNo8" class="w-full p-2 border rounded" disabled oninput="enableNextField('docNo8', 'file8')">
                <label class="block mt-4 mb-2">Upload File:</label>
                <input type="file" id="file8" name="file8" class="w-full p-2 border rounded" disabled onchange="enableNextField('file8', 'date9')">
            </div>

            
            <div>
                <h3 class="font-semibold mb-2 text-center">9. Warehouse Stock Report</h3>
                <label class="block mb-2">Date Issued (GC):</label>
                <input type="date" id="date9" name="date9" class="w-full p-2 border rounded" disabled oninput="enableNextField('date9', 'docNo9')">
                <label class="block mt-4 mb-2">Document No:</label>
                <input type="text" id="docNo9" name="docNo9" class="w-full p-2 border rounded" disabled oninput="enableNextField('docNo9', 'file9')">
                <label class="block mt-4 mb-2">Upload File:</label>
                <input type="file" id="file9" name="file9" class="w-full p-2 border rounded" disabled onchange="enableNextField('file9', 'date10')">
            </div>

            
            <div>
                <h3 class="font-semibold mb-2 text-center">10. Stuffing Report</h3>
                <label class="block mb-2">Date Issued (GC):</label>
                <input type="date" id="date10" name="date10" class="w-full p-2 border rounded" disabled oninput="enableNextField('date10', 'docNo10')">
                <label class="block mt-4 mb-2">Document No:</label>
                <input type="text" id="docNo10" name="docNo10" class="w-full p-2 border rounded" disabled oninput="enableNextField('docNo10', 'file10')">
                <label class="block mt-4 mb-2">Upload File:</label>
                <input type="file" id="file10" name="file10" class="w-full p-2 border rounded" disabled onchange="enableNextField('file10', 'date11')">
            </div>

            
            <div>
                <h3 class="font-semibold mb-2 text-center">11. Weighbridge Report at Stuffing</h3>
                <label class="block mb-2">Date Issued (GC):</label>
                <input type="date" id="date11" name="date11" class="w-full p-2 border rounded" disabled oninput="enableNextField('date11', 'docNo11')">
                <label class="block mt-4 mb-2">Document No:</label>
                <input type="text" id="docNo11" name="docNo11" class="w-full p-2 border rounded" disabled oninput="enableNextField('docNo11', 'file11')">
                <label class="block mt-4 mb-2">Upload File:</label>
                <input type="file" id="file11" name="file11" class="w-full p-2 border rounded" disabled onchange="document.getElementById('submit').disabled = false;">
            </div>

            <!-- Content of step 8 to step 11 remains unchanged -->

            <div class="flex justify-center">
                <input type="submit" id="submit" name="submit" value="Submit" class="bg-blue-500 text-white px-4 py-2 rounded cursor-pointer disabled:bg-gray-300" disabled>
            </div>
        </form>
    </div>

</body>
</html>
